<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36" version="28.2.0">
  <diagram name="C4-Context" id="d1">
    <mxGraphModel dx="1303" dy="703" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="c1_actor" value="Customer" style="shape=actor;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="140" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="c1_sys" value="Cashflow Ledger Platform" style="swimlane;whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="60" width="820" height="420" as="geometry" />
        </mxCell>
        <mxCell id="c1_api" value="API Gateway" style="rounded=1;whiteSpace=wrap;html=1;" parent="c1_sys" vertex="1">
          <mxGeometry x="40" y="90" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1_ledger" value="Ledger Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="c1_sys" vertex="1">
          <mxGeometry x="260" y="140" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1_bq" value="Balance Query Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="c1_sys" vertex="1">
          <mxGeometry x="240" y="60" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1_rmq" value="RabbitMQ" style="rounded=1;whiteSpace=wrap;html=1;" parent="c1_sys" vertex="1">
          <mxGeometry x="450" y="330" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1_e2" value="publishes events" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;" parent="c1_sys" source="c1_ledger" target="c1_rmq" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c1_consol" value="Consolidator Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="c1_sys" vertex="1">
          <mxGeometry x="260" y="230" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1_e3" value="consumes" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;" parent="c1_sys" source="c1_consol" target="c1_rmq" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c1_pg" value="PostgreSQL" style="shape=process;whiteSpace=wrap;html=1;" parent="c1_sys" vertex="1">
          <mxGeometry x="640" y="250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1_e4" value="writes ledger" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;" parent="c1_sys" source="c1_ledger" target="c1_pg" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c1_e5" value="writes report" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;" parent="c1_sys" source="c1_consol" target="c1_pg" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c1_e6" value="reads report" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;" parent="c1_sys" source="c1_bq" target="c1_pg" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c1_mon" value="Prometheus / Grafana" style="rounded=1;whiteSpace=wrap;html=1;" parent="c1_sys" vertex="1">
          <mxGeometry x="630" y="350" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1_e1" value="uses" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;" parent="1" source="c1_actor" target="c1_api" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
